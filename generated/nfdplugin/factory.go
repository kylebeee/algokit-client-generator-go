// Code generated by algokit-client-generator-go. DO NOT EDIT.
package nfdplugin

import (
	"context"

	algokit "github.com/kylebeee/algokit-utils-go"
)

// Factory is a typed factory for deploying NfdPlugin smart contracts.
type Factory struct {
	AppFactory *algokit.AppFactory
}

// NewFactory creates a new typed factory.
func NewFactory(params algokit.AppFactoryParams) (*Factory, error) {
	if params.AppSpec == nil {
		spec, err := GetAppSpec()
		if err != nil {
			return nil, err
		}
		params.AppSpec = spec
	}
	if params.AppName == "" {
		params.AppName = "NfdPlugin"
	}
	factory, err := algokit.NewAppFactory(params)
	if err != nil {
		return nil, err
	}
	return &Factory{AppFactory: factory}, nil
}

// DeployResult holds the result of a deployment.
type DeployResult struct {
	Client *Client
	Result *algokit.SendAppTransactionResult
}

// Create deploys a new instance of the NfdPlugin contract using the typed create method.
func (f *Factory) Create(ctx context.Context, params algokit.FactoryCreateCallParams[CreateArgs]) (*Client, *algokit.SendAppTransactionResult, error) {
	methodArgs := argsToInterfaceCreate(params.Args)
	client, result, err := f.AppFactory.Create(ctx, algokit.AppFactoryCreateParams{
		MethodName:        "create",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		OnComplete:        params.OnComplete,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraPages:        params.ExtraPages,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, nil, err
	}
	typedClient := NewClient(client)
	return typedClient, result, nil
}

// Deploy performs an idempotent deployment of the NfdPlugin contract.
func (f *Factory) Deploy(ctx context.Context, params algokit.DeployParams) (*algokit.DeployResult, error) {
	deployer := algokit.NewAppDeployer(f.AppFactory.Algod(), nil)
	return deployer.Deploy(ctx, f.AppFactory, params)
}
