// Code generated by algokit-client-generator-go. DO NOT EDIT.
package abstractedaccount

import (
	"context"
	"encoding/json"
	"fmt"

	"github.com/algorand/go-algorand-sdk/v2/types"
	algokit "github.com/kylebeee/algokit-utils-go"
)

// Client is a typed client for the AbstractedAccount smart contract.
type Client struct {
	AppClient *algokit.AppClient
}

// NewClient creates a new typed client wrapping an existing AppClient.
func NewClient(appClient *algokit.AppClient) *Client {
	return &Client{AppClient: appClient}
}

// NewClientFromSpec creates a new typed client from AppClientParams.
func NewClientFromSpec(params algokit.AppClientParams) (*Client, error) {
	if params.AppSpec == nil {
		spec, err := GetAppSpec()
		if err != nil {
			return nil, err
		}
		params.AppSpec = spec
	}
	appClient, err := algokit.NewAppClient(params)
	if err != nil {
		return nil, err
	}
	return &Client{AppClient: appClient}, nil
}

// GetAppSpec returns the parsed ARC-56 app specification for this contract.
func GetAppSpec() (*algokit.Arc56Contract, error) {
	return algokit.ParseArc56Contract([]byte(AppSpecJSON))
}

// AppID returns the application ID.
func (c *Client) AppID() uint64 {
	return c.AppClient.AppID()
}

// AppAddress returns the application's escrow address.
func (c *Client) AppAddress() types.Address {
	return c.AppClient.AppAddress()
}

// NewGroup creates a new Composer for building atomic transaction groups.
func (c *Client) NewGroup() *Composer {
	return &Composer{
		client:   c,
		composer: c.AppClient.NewComposer(),
	}
}

// SendRegister calls the register ABI method and waits for confirmation.
// Register the abstracted account with the escrow factory.
// This allows apps to correlate the account with the app without needing
// it to be explicitly provided.
func (c *Client) SendRegister(ctx context.Context, params algokit.CallParams[RegisterArgs]) error {
	methodArgs := argsToInterfaceRegister(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "register",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetDomain calls the setDomain ABI method and waits for confirmation.
// Set the domain associated with the admin account
func (c *Client) SendSetDomain(ctx context.Context, params algokit.CallParams[SetDomainArgs]) error {
	methodArgs := argsToInterfaceSetDomain(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setDomain",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetRevocationApp calls the setRevocationApp ABI method and waits for confirmation.
// Changes the revocation app associated with the contract
func (c *Client) SendSetRevocationApp(ctx context.Context, params algokit.CallParams[SetRevocationAppArgs]) error {
	methodArgs := argsToInterfaceSetRevocationApp(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setRevocationApp",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetNickname calls the setNickname ABI method and waits for confirmation.
// Changes the nickname of the wallet
func (c *Client) SendSetNickname(ctx context.Context, params algokit.CallParams[SetNicknameArgs]) error {
	methodArgs := argsToInterfaceSetNickname(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setNickname",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetAvatar calls the setAvatar ABI method and waits for confirmation.
// Changes the avatar of the wallet
func (c *Client) SendSetAvatar(ctx context.Context, params algokit.CallParams[SetAvatarArgs]) error {
	methodArgs := argsToInterfaceSetAvatar(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setAvatar",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetBanner calls the setBanner ABI method and waits for confirmation.
// Changes the banner of the wallet
func (c *Client) SendSetBanner(ctx context.Context, params algokit.CallParams[SetBannerArgs]) error {
	methodArgs := argsToInterfaceSetBanner(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setBanner",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendSetBio calls the setBio ABI method and waits for confirmation.
// Changes the bio of the wallet
func (c *Client) SendSetBio(ctx context.Context, params algokit.CallParams[SetBioArgs]) error {
	methodArgs := argsToInterfaceSetBio(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setBio",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58ChangeAdmin calls the arc58_changeAdmin ABI method and waits for confirmation.
// Attempt to change the admin for this app. Some implementations MAY not support this.
func (c *Client) SendArc58ChangeAdmin(ctx context.Context, params algokit.CallParams[Arc58ChangeAdminArgs]) error {
	methodArgs := argsToInterfaceArc58ChangeAdmin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_changeAdmin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58PluginChangeAdmin calls the arc58_pluginChangeAdmin ABI method and waits for confirmation.
// Attempt to change the admin via plugin.
func (c *Client) SendArc58PluginChangeAdmin(ctx context.Context, params algokit.CallParams[Arc58PluginChangeAdminArgs]) error {
	methodArgs := argsToInterfaceArc58PluginChangeAdmin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_pluginChangeAdmin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58VerifyAuthAddress calls the arc58_verifyAuthAddress ABI method and waits for confirmation.
// Verify the abstracted account is rekeyed to this app
func (c *Client) SendArc58VerifyAuthAddress(ctx context.Context) error {
	methodArgs := []interface{}(nil)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName: "arc58_verifyAuthAddress",
		MethodArgs: methodArgs,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RekeyTo calls the arc58_rekeyTo ABI method and waits for confirmation.
// Rekey the abstracted account to another address. Primarily useful for rekeying to an EOA.
func (c *Client) SendArc58RekeyTo(ctx context.Context, params algokit.CallParams[Arc58RekeyToArgs]) error {
	methodArgs := argsToInterfaceArc58RekeyTo(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_rekeyTo",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58CanCall calls the arc58_canCall ABI method and waits for confirmation.
// Check whether the plugin can be used
func (c *Client) SendArc58CanCall(ctx context.Context, params algokit.CallParams[Arc58CanCallArgs]) (*Arc58CanCallMethodResult, error) {
	methodArgs := argsToInterfaceArc58CanCall(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_canCall",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58CanCallMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.(bool); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58RekeyToPlugin calls the arc58_rekeyToPlugin ABI method and waits for confirmation.
// Temporarily rekey to an approved plugin app address
func (c *Client) SendArc58RekeyToPlugin(ctx context.Context, params algokit.CallParams[Arc58RekeyToPluginArgs]) error {
	methodArgs := argsToInterfaceArc58RekeyToPlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_rekeyToPlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RekeyToNamedPlugin calls the arc58_rekeyToNamedPlugin ABI method and waits for confirmation.
// Temporarily rekey to a named plugin app address
func (c *Client) SendArc58RekeyToNamedPlugin(ctx context.Context, params algokit.CallParams[Arc58RekeyToNamedPluginArgs]) error {
	methodArgs := argsToInterfaceArc58RekeyToNamedPlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_rekeyToNamedPlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58AddPlugin calls the arc58_addPlugin ABI method and waits for confirmation.
// Add an app to the list of approved plugins
func (c *Client) SendArc58AddPlugin(ctx context.Context, params algokit.CallParams[Arc58AddPluginArgs]) error {
	methodArgs := argsToInterfaceArc58AddPlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_addPlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendAssignDomain calls the assignDomain ABI method and waits for confirmation.
// Assign a domain to a passkey
func (c *Client) SendAssignDomain(ctx context.Context, params algokit.CallParams[AssignDomainArgs]) error {
	methodArgs := argsToInterfaceAssignDomain(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "assignDomain",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RemovePlugin calls the arc58_removePlugin ABI method and waits for confirmation.
// Remove an app from the list of approved plugins
func (c *Client) SendArc58RemovePlugin(ctx context.Context, params algokit.CallParams[Arc58RemovePluginArgs]) error {
	methodArgs := argsToInterfaceArc58RemovePlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_removePlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58AddNamedPlugin calls the arc58_addNamedPlugin ABI method and waits for confirmation.
// Add a named plugin
func (c *Client) SendArc58AddNamedPlugin(ctx context.Context, params algokit.CallParams[Arc58AddNamedPluginArgs]) error {
	methodArgs := argsToInterfaceArc58AddNamedPlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_addNamedPlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RemoveNamedPlugin calls the arc58_removeNamedPlugin ABI method and waits for confirmation.
// Remove a named plugin
func (c *Client) SendArc58RemoveNamedPlugin(ctx context.Context, params algokit.CallParams[Arc58RemoveNamedPluginArgs]) error {
	methodArgs := argsToInterfaceArc58RemoveNamedPlugin(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_removeNamedPlugin",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58NewEscrow calls the arc58_newEscrow ABI method and waits for confirmation.
// Create a new escrow for the controlled address
func (c *Client) SendArc58NewEscrow(ctx context.Context, params algokit.CallParams[Arc58NewEscrowArgs]) (*Arc58NewEscrowMethodResult, error) {
	methodArgs := argsToInterfaceArc58NewEscrow(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_newEscrow",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58NewEscrowMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.(uint64); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58ToggleEscrowLock calls the arc58_toggleEscrowLock ABI method and waits for confirmation.
// Lock or Unlock an escrow account
func (c *Client) SendArc58ToggleEscrowLock(ctx context.Context, params algokit.CallParams[Arc58ToggleEscrowLockArgs]) (*Arc58ToggleEscrowLockMethodResult, error) {
	methodArgs := argsToInterfaceArc58ToggleEscrowLock(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_toggleEscrowLock",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58ToggleEscrowLockMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if vals, ok := result.ABIReturn.([]interface{}); ok {
			if err := algokit.TupleToStruct(vals, &typedResult.Return); err != nil {
				return nil, fmt.Errorf("failed to decode return: %w", err)
			}
		}
	}

	return typedResult, nil
}

// SendArc58Reclaim calls the arc58_reclaim ABI method and waits for confirmation.
// Transfer funds from an escrow back to the controlled address.
func (c *Client) SendArc58Reclaim(ctx context.Context, params algokit.CallParams[Arc58ReclaimArgs]) error {
	methodArgs := argsToInterfaceArc58Reclaim(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_reclaim",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58PluginReclaim calls the arc58_pluginReclaim ABI method and waits for confirmation.
// Transfer funds from an escrow back to the controlled address via a plugin / allowed caller.
// The plugin must have canReclaim set to true. CloseOut on asset transfers is blocked when the escrow is locked.
func (c *Client) SendArc58PluginReclaim(ctx context.Context, params algokit.CallParams[Arc58PluginReclaimArgs]) error {
	methodArgs := argsToInterfaceArc58PluginReclaim(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_pluginReclaim",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58OptInEscrow calls the arc58_optInEscrow ABI method and waits for confirmation.
// Opt-in an escrow account to assets
func (c *Client) SendArc58OptInEscrow(ctx context.Context, params algokit.CallParams[Arc58OptInEscrowArgs]) error {
	methodArgs := argsToInterfaceArc58OptInEscrow(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_optInEscrow",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58PluginOptInEscrow calls the arc58_pluginOptInEscrow ABI method and waits for confirmation.
// Opt-in an escrow account to assets via a plugin / allowed caller
func (c *Client) SendArc58PluginOptInEscrow(ctx context.Context, params algokit.CallParams[Arc58PluginOptInEscrowArgs]) error {
	methodArgs := argsToInterfaceArc58PluginOptInEscrow(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_pluginOptInEscrow",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58AddAllowances calls the arc58_addAllowances ABI method and waits for confirmation.
// Add an allowance for an escrow account
func (c *Client) SendArc58AddAllowances(ctx context.Context, params algokit.CallParams[Arc58AddAllowancesArgs]) error {
	methodArgs := argsToInterfaceArc58AddAllowances(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_addAllowances",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RemoveAllowances calls the arc58_removeAllowances ABI method and waits for confirmation.
// Remove an allowances for an escrow account
func (c *Client) SendArc58RemoveAllowances(ctx context.Context, params algokit.CallParams[Arc58RemoveAllowancesArgs]) error {
	methodArgs := argsToInterfaceArc58RemoveAllowances(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_removeAllowances",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58AddExecutionKey calls the arc58_addExecutionKey ABI method and waits for confirmation.
// Add or extend an execution key for pre-authorized plugin usage
func (c *Client) SendArc58AddExecutionKey(ctx context.Context, params algokit.CallParams[Arc58AddExecutionKeyArgs]) error {
	methodArgs := argsToInterfaceArc58AddExecutionKey(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_addExecutionKey",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58RemoveExecutionKey calls the arc58_removeExecutionKey ABI method and waits for confirmation.
// Remove an execution key. Can be called by admin at any time, or by anyone after the key has expired.
func (c *Client) SendArc58RemoveExecutionKey(ctx context.Context, params algokit.CallParams[Arc58RemoveExecutionKeyArgs]) error {
	methodArgs := argsToInterfaceArc58RemoveExecutionKey(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_removeExecutionKey",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendArc58GetAdmin calls the arc58_getAdmin ABI method and waits for confirmation.
// Get the admin of this app. This method SHOULD always be used rather than reading directly from state
// because different implementations may have different ways of determining the admin.
func (c *Client) SendArc58GetAdmin(ctx context.Context) (*Arc58GetAdminMethodResult, error) {
	methodArgs := []interface{}(nil)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName: "arc58_getAdmin",
		MethodArgs: methodArgs,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetAdminMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.(types.Address); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetPlugins calls the arc58_getPlugins ABI method and waits for confirmation.
// Get plugin info for a list of plugin keys
func (c *Client) SendArc58GetPlugins(ctx context.Context, params algokit.CallParams[Arc58GetPluginsArgs]) (*Arc58GetPluginsMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetPlugins(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getPlugins",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetPluginsMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([][]interface{}); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetNamedPlugins calls the arc58_getNamedPlugins ABI method and waits for confirmation.
// Get plugin info for a list of named plugins
func (c *Client) SendArc58GetNamedPlugins(ctx context.Context, params algokit.CallParams[Arc58GetNamedPluginsArgs]) (*Arc58GetNamedPluginsMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetNamedPlugins(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getNamedPlugins",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetNamedPluginsMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([][]interface{}); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetEscrows calls the arc58_getEscrows ABI method and waits for confirmation.
// Get escrow info for a list of escrow names
func (c *Client) SendArc58GetEscrows(ctx context.Context, params algokit.CallParams[Arc58GetEscrowsArgs]) (*Arc58GetEscrowsMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetEscrows(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getEscrows",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetEscrowsMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([][]interface{}); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetAllowances calls the arc58_getAllowances ABI method and waits for confirmation.
// Get allowance info for a list of assets on a given escrow
func (c *Client) SendArc58GetAllowances(ctx context.Context, params algokit.CallParams[Arc58GetAllowancesArgs]) (*Arc58GetAllowancesMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetAllowances(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getAllowances",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetAllowancesMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([][]interface{}); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetExecutions calls the arc58_getExecutions ABI method and waits for confirmation.
// Get execution key info for a list of leases
func (c *Client) SendArc58GetExecutions(ctx context.Context, params algokit.CallParams[Arc58GetExecutionsArgs]) (*Arc58GetExecutionsMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetExecutions(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getExecutions",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetExecutionsMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([][]interface{}); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendArc58GetDomainKeys calls the arc58_getDomainKeys ABI method and waits for confirmation.
// Get domain key assignments for a list of addresses
func (c *Client) SendArc58GetDomainKeys(ctx context.Context, params algokit.CallParams[Arc58GetDomainKeysArgs]) (*Arc58GetDomainKeysMethodResult, error) {
	methodArgs := argsToInterfaceArc58GetDomainKeys(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "arc58_getDomainKeys",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &Arc58GetDomainKeysMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([]string); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

// SendMBR calls the mbr ABI method and waits for confirmation.
// Calculate the minimum balance requirements for various box operations
func (c *Client) SendMBR(ctx context.Context, params algokit.CallParams[MBRArgs]) (*MBRMethodResult, error) {
	methodArgs := argsToInterfaceMBR(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "mbr",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &MBRMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if vals, ok := result.ABIReturn.([]interface{}); ok {
			if err := algokit.TupleToStruct(vals, &typedResult.Return); err != nil {
				return nil, fmt.Errorf("failed to decode return: %w", err)
			}
		}
	}

	return typedResult, nil
}

// SendBalance calls the balance ABI method and waits for confirmation.
// Get the balance of a set of assets in the account, including staked amounts
func (c *Client) SendBalance(ctx context.Context, params algokit.CallParams[BalanceArgs]) (*BalanceMethodResult, error) {
	methodArgs := argsToInterfaceBalance(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "balance",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return nil, err
	}

	typedResult := &BalanceMethodResult{
		SendAppTransactionResult: *result,
	}

	if result.ABIReturn != nil {
		if val, ok := result.ABIReturn.([]uint64); ok {
			typedResult.Return = val
		}
	}

	return typedResult, nil
}

func argsToInterfaceCreate(args CreateArgs) []interface{} {
	return []interface{}{
		args.Version,
		args.ControlledAddress,
		args.Admin,
		args.Domain,
		args.EscrowFactory,
		args.RevocationApp,
		args.Nickname,
		args.Referrer,
	}
}

func argsToInterfaceRegister(args RegisterArgs) []interface{} {
	return []interface{}{
		args.Escrow,
	}
}

func argsToInterfaceUpdate(args UpdateArgs) []interface{} {
	return []interface{}{
		args.Version,
	}
}

func argsToInterfaceSetDomain(args SetDomainArgs) []interface{} {
	return []interface{}{
		args.Domain,
	}
}

func argsToInterfaceSetRevocationApp(args SetRevocationAppArgs) []interface{} {
	return []interface{}{
		args.App,
	}
}

func argsToInterfaceSetNickname(args SetNicknameArgs) []interface{} {
	return []interface{}{
		args.Nickname,
	}
}

func argsToInterfaceSetAvatar(args SetAvatarArgs) []interface{} {
	return []interface{}{
		args.Avatar,
	}
}

func argsToInterfaceSetBanner(args SetBannerArgs) []interface{} {
	return []interface{}{
		args.Banner,
	}
}

func argsToInterfaceSetBio(args SetBioArgs) []interface{} {
	return []interface{}{
		args.Bio,
	}
}

func argsToInterfaceArc58ChangeAdmin(args Arc58ChangeAdminArgs) []interface{} {
	return []interface{}{
		args.NewAdmin,
	}
}

func argsToInterfaceArc58PluginChangeAdmin(args Arc58PluginChangeAdminArgs) []interface{} {
	return []interface{}{
		args.NewAdmin,
	}
}

func argsToInterfaceArc58RekeyTo(args Arc58RekeyToArgs) []interface{} {
	return []interface{}{
		args.Address,
		args.Flash,
	}
}

func argsToInterfaceArc58CanCall(args Arc58CanCallArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Global,
		args.Address,
		args.Escrow,
		args.Method,
	}
}

func argsToInterfaceArc58RekeyToPlugin(args Arc58RekeyToPluginArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Global,
		args.Escrow,
		args.MethodOffsets,
		args.FundsRequest,
	}
}

func argsToInterfaceArc58RekeyToNamedPlugin(args Arc58RekeyToNamedPluginArgs) []interface{} {
	return []interface{}{
		args.Name,
		args.Global,
		args.Escrow,
		args.MethodOffsets,
		args.FundsRequest,
	}
}

func argsToInterfaceArc58AddPlugin(args Arc58AddPluginArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Caller,
		args.Escrow,
		args.Admin,
		args.DelegationType,
		args.LastValid,
		args.Cooldown,
		args.Methods,
		args.UseRounds,
		args.UseExecutionKey,
		args.CoverFees,
		args.CanReclaim,
		args.DefaultToEscrow,
	}
}

func argsToInterfaceAssignDomain(args AssignDomainArgs) []interface{} {
	return []interface{}{
		args.Caller,
		args.Domain,
	}
}

func argsToInterfaceArc58RemovePlugin(args Arc58RemovePluginArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Caller,
		args.Escrow,
	}
}

func argsToInterfaceArc58AddNamedPlugin(args Arc58AddNamedPluginArgs) []interface{} {
	return []interface{}{
		args.Name,
		args.Plugin,
		args.Caller,
		args.Escrow,
		args.Admin,
		args.DelegationType,
		args.LastValid,
		args.Cooldown,
		args.Methods,
		args.UseRounds,
		args.UseExecutionKey,
		args.CoverFees,
		args.CanReclaim,
		args.DefaultToEscrow,
	}
}

func argsToInterfaceArc58RemoveNamedPlugin(args Arc58RemoveNamedPluginArgs) []interface{} {
	return []interface{}{
		args.Name,
	}
}

func argsToInterfaceArc58NewEscrow(args Arc58NewEscrowArgs) []interface{} {
	return []interface{}{
		args.Escrow,
	}
}

func argsToInterfaceArc58ToggleEscrowLock(args Arc58ToggleEscrowLockArgs) []interface{} {
	return []interface{}{
		args.Escrow,
	}
}

func argsToInterfaceArc58Reclaim(args Arc58ReclaimArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.Reclaims,
	}
}

func argsToInterfaceArc58PluginReclaim(args Arc58PluginReclaimArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Caller,
		args.Escrow,
		args.Reclaims,
	}
}

func argsToInterfaceArc58OptInEscrow(args Arc58OptInEscrowArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.Assets,
	}
}

func argsToInterfaceArc58PluginOptInEscrow(args Arc58PluginOptInEscrowArgs) []interface{} {
	return []interface{}{
		args.Plugin,
		args.Caller,
		args.Escrow,
		args.Assets,
		args.MBRPayment,
	}
}

func argsToInterfaceArc58AddAllowances(args Arc58AddAllowancesArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.Allowances,
	}
}

func argsToInterfaceArc58RemoveAllowances(args Arc58RemoveAllowancesArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.Assets,
	}
}

func argsToInterfaceArc58AddExecutionKey(args Arc58AddExecutionKeyArgs) []interface{} {
	return []interface{}{
		args.Lease,
		args.Groups,
		args.FirstValid,
		args.LastValid,
	}
}

func argsToInterfaceArc58RemoveExecutionKey(args Arc58RemoveExecutionKeyArgs) []interface{} {
	return []interface{}{
		args.Lease,
	}
}

func argsToInterfaceArc58GetPlugins(args Arc58GetPluginsArgs) []interface{} {
	return []interface{}{
		args.Keys,
	}
}

func argsToInterfaceArc58GetNamedPlugins(args Arc58GetNamedPluginsArgs) []interface{} {
	return []interface{}{
		args.Names,
	}
}

func argsToInterfaceArc58GetEscrows(args Arc58GetEscrowsArgs) []interface{} {
	return []interface{}{
		args.Escrows,
	}
}

func argsToInterfaceArc58GetAllowances(args Arc58GetAllowancesArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.Assets,
	}
}

func argsToInterfaceArc58GetExecutions(args Arc58GetExecutionsArgs) []interface{} {
	return []interface{}{
		args.Leases,
	}
}

func argsToInterfaceArc58GetDomainKeys(args Arc58GetDomainKeysArgs) []interface{} {
	return []interface{}{
		args.Addresses,
	}
}

func argsToInterfaceMBR(args MBRArgs) []interface{} {
	return []interface{}{
		args.Escrow,
		args.MethodCount,
		args.Plugin,
		args.Groups,
	}
}

func argsToInterfaceBalance(args BalanceArgs) []interface{} {
	return []interface{}{
		args.Assets,
	}
}

// Unmarshal helper for JSON decoding
func unmarshal(data []byte, v interface{}) error {
	return json.Unmarshal(data, v)
}

// Ensure fmt is used
var _ = fmt.Sprintf
