// Code generated by algokit-client-generator-go. DO NOT EDIT.
package updateakitadaoplugin

import (
	"context"
	"encoding/json"
	"fmt"

	"github.com/algorand/go-algorand-sdk/v2/types"
	algokit "github.com/kylebeee/algokit-utils-go"
)

// Client is a typed client for the UpdateAkitaDaoPlugin smart contract.
type Client struct {
	AppClient *algokit.AppClient
}

// NewClient creates a new typed client wrapping an existing AppClient.
func NewClient(appClient *algokit.AppClient) *Client {
	return &Client{AppClient: appClient}
}

// NewClientFromSpec creates a new typed client from AppClientParams.
func NewClientFromSpec(params algokit.AppClientParams) (*Client, error) {
	if params.AppSpec == nil {
		spec, err := GetAppSpec()
		if err != nil {
			return nil, err
		}
		params.AppSpec = spec
	}
	appClient, err := algokit.NewAppClient(params)
	if err != nil {
		return nil, err
	}
	return &Client{AppClient: appClient}, nil
}

// GetAppSpec returns the parsed ARC-56 app specification for this contract.
func GetAppSpec() (*algokit.Arc56Contract, error) {
	return algokit.ParseArc56Contract([]byte(AppSpecJSON))
}

// AppID returns the application ID.
func (c *Client) AppID() uint64 {
	return c.AppClient.AppID()
}

// AppAddress returns the application's escrow address.
func (c *Client) AppAddress() types.Address {
	return c.AppClient.AppAddress()
}

// NewGroup creates a new Composer for building atomic transaction groups.
func (c *Client) NewGroup() *Composer {
	return &Composer{
		client:   c,
		composer: c.AppClient.NewComposer(),
	}
}

// SendSetClearProgram calls the setClearProgram ABI method and waits for confirmation.
func (c *Client) SendSetClearProgram(ctx context.Context, params algokit.CallParams[SetClearProgramArgs]) error {
	methodArgs := argsToInterfaceSetClearProgram(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "setClearProgram",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendInitBoxedContract calls the initBoxedContract ABI method and waits for confirmation.
func (c *Client) SendInitBoxedContract(ctx context.Context, params algokit.CallParams[InitBoxedContractArgs]) error {
	methodArgs := argsToInterfaceInitBoxedContract(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "initBoxedContract",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendLoadBoxedContract calls the loadBoxedContract ABI method and waits for confirmation.
func (c *Client) SendLoadBoxedContract(ctx context.Context, params algokit.CallParams[LoadBoxedContractArgs]) error {
	methodArgs := argsToInterfaceLoadBoxedContract(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "loadBoxedContract",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendDeleteBoxedContract calls the deleteBoxedContract ABI method and waits for confirmation.
func (c *Client) SendDeleteBoxedContract(ctx context.Context, params algokit.CallParams[DeleteBoxedContractArgs]) error {
	methodArgs := argsToInterfaceDeleteBoxedContract(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "deleteBoxedContract",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendUpdateApp calls the updateApp ABI method and waits for confirmation.
func (c *Client) SendUpdateApp(ctx context.Context, params algokit.CallParams[UpdateAppArgs]) error {
	methodArgs := argsToInterfaceUpdateApp(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "updateApp",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendUpdateAkitaDaoAppIDForApp calls the updateAkitaDaoAppIDForApp ABI method and waits for confirmation.
func (c *Client) SendUpdateAkitaDaoAppIDForApp(ctx context.Context, params algokit.CallParams[UpdateAkitaDaoAppIDForAppArgs]) error {
	methodArgs := argsToInterfaceUpdateAkitaDaoAppIDForApp(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "updateAkitaDaoAppIDForApp",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendUpdateAkitaDaoEscrowForApp calls the updateAkitaDaoEscrowForApp ABI method and waits for confirmation.
func (c *Client) SendUpdateAkitaDaoEscrowForApp(ctx context.Context, params algokit.CallParams[UpdateAkitaDaoEscrowForAppArgs]) error {
	methodArgs := argsToInterfaceUpdateAkitaDaoEscrowForApp(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "updateAkitaDaoEscrowForApp",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendUpdateRevocation calls the updateRevocation ABI method and waits for confirmation.
func (c *Client) SendUpdateRevocation(ctx context.Context, params algokit.CallParams[UpdateRevocationArgs]) error {
	methodArgs := argsToInterfaceUpdateRevocation(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "updateRevocation",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

// SendUpdateFactoryChildContract calls the updateFactoryChildContract ABI method and waits for confirmation.
// Updates the factory's child contract bytecode using the contract stored in this plugin's box.
// This allows the factory to deploy new wallets with the updated AbstractedAccount contract.
//
// The contract must first be uploaded to this plugin via initBoxedContract/loadBoxedContract,
// then this method transfers it to the factory's box storage via inner transactions.
//
// Uses itxnCompose to group all inner transactions together so the factory's loadBoxedContract
// validation (which checks gtxn for initBoxedContract) works correctly.
func (c *Client) SendUpdateFactoryChildContract(ctx context.Context, params algokit.CallParams[UpdateFactoryChildContractArgs]) error {
	methodArgs := argsToInterfaceUpdateFactoryChildContract(params.Args)

	result, err := c.AppClient.Send(ctx, algokit.AppCallSendParams{
		MethodName:        "updateFactoryChildContract",
		MethodArgs:        methodArgs,
		Sender:            params.Sender,
		Signer:            params.Signer,
		Note:              params.Note,
		BoxReferences:     params.BoxReferences,
		AccountReferences: params.AccountReferences,
		AppReferences:     params.AppReferences,
		AssetReferences:   params.AssetReferences,
		ExtraFee:          params.ExtraFee,
		StaticFee:         params.StaticFee,
		SendParams:        params.SendParams,
	})
	if err != nil {
		return err
	}

	_ = result
	return nil
}

func argsToInterfaceCreate(args CreateArgs) []interface{} {
	return []interface{}{
		args.AkitaDao,
		args.ClearProgram,
	}
}

func argsToInterfaceSetClearProgram(args SetClearProgramArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.ClearProgram,
	}
}

func argsToInterfaceInitBoxedContract(args InitBoxedContractArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.Version,
		args.Size,
	}
}

func argsToInterfaceLoadBoxedContract(args LoadBoxedContractArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.Offset,
		args.Data,
	}
}

func argsToInterfaceDeleteBoxedContract(args DeleteBoxedContractArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
	}
}

func argsToInterfaceUpdateApp(args UpdateAppArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.AppID,
	}
}

func argsToInterfaceUpdateAkitaDaoAppIDForApp(args UpdateAkitaDaoAppIDForAppArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.AppID,
		args.NewAkitaDaoAppID,
	}
}

func argsToInterfaceUpdateAkitaDaoEscrowForApp(args UpdateAkitaDaoEscrowForAppArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.AppID,
		args.NewEscrow,
	}
}

func argsToInterfaceUpdateRevocation(args UpdateRevocationArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.App,
	}
}

func argsToInterfaceUpdateFactoryChildContract(args UpdateFactoryChildContractArgs) []interface{} {
	return []interface{}{
		args.Wallet,
		args.RekeyBack,
		args.FactoryAppID,
	}
}

// Unmarshal helper for JSON decoding
func unmarshal(data []byte, v interface{}) error {
	return json.Unmarshal(data, v)
}

// Ensure fmt is used
var _ = fmt.Sprintf
